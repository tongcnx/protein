<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Protein Weekly Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen">

<div class="max-w-5xl mx-auto py-10 px-4">

    <h1 class="text-3xl font-bold text-center mb-8">
        ü•© Protein Weekly Planner
    </h1>

    <!-- ================= CALCULATOR CARD ================= -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-8">
        <h2 class="text-xl font-semibold mb-4">Step 1: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô</h2>

        <form action="/calculate" method="post" class="grid grid-cols-1 md:grid-cols-2 gap-4">

            <input type="number" step="0.1" name="weight" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg)" required class="input-style">
            <input type="number" step="0.1" name="height" placeholder="‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (cm)" required class="input-style">
            <input type="number" name="age" placeholder="‡∏≠‡∏≤‡∏¢‡∏∏" required class="input-style">

            <select name="gender" class="input-style">
                <option value="male">‡∏ä‡∏≤‡∏¢</option>
                <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
            </select>

            <select name="activity" class="input-style">
                <option value="1.2">‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</option>
                <option value="1.375">‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á 1-3 ‡∏ß‡∏±‡∏ô</option>
                <option value="1.55">3-5 ‡∏ß‡∏±‡∏ô</option>
                <option value="1.725">6-7 ‡∏ß‡∏±‡∏ô</option>
            </select>

            <select name="goal" class="input-style">
                <option value="maintain">Maintain</option>
                <option value="gain">Muscle Gain</option>
                <option value="cut">Fat Loss</option>
            </select>

            <div class="md:col-span-2">
                <button class="btn-primary w-full">
                    ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                </button>
            </div>
        </form>
    </div>


    {% if daily_protein %}
    <!-- ================= RESULT CARD ================= -->
    <div class="bg-green-50 border border-green-200 rounded-xl p-6 mb-8">
        <h2 class="text-xl font-semibold mb-4">üìä ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h2>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
            <div class="result-box">
                <p class="text-sm text-gray-500">BMR</p>
                <p class="font-bold text-lg">{{ bmr }} kcal</p>
            </div>
            <div class="result-box">
                <p class="text-sm text-gray-500">TDEE</p>
                <p class="font-bold text-lg">{{ tdee }} kcal</p>
            </div>
            <div class="result-box">
                <p class="text-sm text-gray-500">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô/‡∏ß‡∏±‡∏ô</p>
                <p class="font-bold text-lg">{{ daily_protein }} g</p>
            </div>
            <div class="result-box">
                <p class="text-sm text-gray-500">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</p>
                <p class="font-bold text-lg">{{ weekly_protein }} g</p>
            </div>
        </div>
    </div>


    <!-- ================= PORTFOLIO CARD ================= -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-8">
        <h2 class="text-xl font-semibold mb-4">Step 2: Protein Portfolio Planner</h2>

        <form action="/portfolio" method="post" class="space-y-4">

            <input type="hidden" name="weekly_protein" value="{{ weekly_protein }}">

            <div>
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏∑‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</label>
                <select name="meals_per_day" class="input-style w-full mt-1">
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <input type="number" name="chicken_percent" placeholder="‡∏≠‡∏Å‡πÑ‡∏Å‡πà %" class="input-style">
                <input type="number" name="egg_percent" placeholder="‡πÑ‡∏Ç‡πà %" class="input-style">
                <input type="number" name="whey_percent" placeholder="‡πÄ‡∏ß‡∏¢‡πå %" class="input-style">
                <input type="number" name="fish_percent" placeholder="‡∏õ‡∏•‡∏≤ %" class="input-style">
            </div>

            <button class="btn-primary w-full">
                ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Portfolio
            </button>
        </form>
    </div>
    {% endif %}


    {% if results %}
    <!-- ================= PORTFOLIO RESULT ================= -->
    <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
        <h2 class="text-xl font-semibold mb-4">üì¶ Portfolio Result</h2>

        <div class="space-y-2">
            {% for item, value in results.items() %}
                <div class="flex justify-between border-b pb-1">
                    <span>{{ item }}</span>
                    <span class="font-semibold">{{ value }}</span>
                </div>
            {% endfor %}
        </div>

        <div class="mt-4 text-right font-bold">
            ‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡∏ï‡πà‡∏≠‡∏°‡∏∑‡πâ‡∏≠: {{ protein_per_meal }} g
        </div>
    </div>
    {% endif %}


    {% if error %}
    <div class="bg-red-50 border border-red-200 rounded-xl p-4 mt-6 text-red-600">
        {{ error }}
    </div>
    {% endif %}

</div>


<!-- ===== reusable styles ===== -->
<style>
.input-style {
    @apply border rounded-lg p-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-400;
}

.btn-primary {
    @apply bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition;
}

.result-box {
    @apply bg-white p-3 rounded-lg shadow-sm;
}
</style>

</body>
</html>
