<!DOCTYPE html>
<html>
<head>
    <title>Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen">

<div class="max-w-6xl mx-auto py-10 px-6">

    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-800">ðŸ‘¤ My Profile</h1>
        <p class="text-gray-500 mt-2">Overview of your nutrition journey</p>
    </div>

    <!-- User Card -->
    <div class="bg-white rounded-2xl shadow p-6 mb-8 border border-gray-100">
        <h2 class="text-xl font-semibold text-gray-700 mb-2">Account Information</h2>
        <p class="text-gray-600"><span class="font-medium">Email:</span> {{ user.email }}</p>
    </div>

    <!-- Statistics -->
    <div class="grid md:grid-cols-3 gap-6 mb-10">

        <div class="bg-white rounded-2xl shadow p-6 border border-gray-100">
            <h3 class="text-gray-500 text-sm uppercase tracking-wide">Total Weeks</h3>
            <p class="text-3xl font-bold text-gray-800 mt-2">{{ total_weeks }}</p>
        </div>

        <div class="bg-white rounded-2xl shadow p-6 border border-gray-100">
            <h3 class="text-gray-500 text-sm uppercase tracking-wide">Avg Estimated Cost</h3>
            <p class="text-3xl font-bold text-green-600 mt-2">
                {{ avg_estimated }} à¸¿
            </p>
        </div>

        <div class="bg-white rounded-2xl shadow p-6 border border-gray-100">
            <h3 class="text-gray-500 text-sm uppercase tracking-wide">Avg Actual Cost</h3>
            <p class="text-3xl font-bold text-blue-600 mt-2">
                {{ avg_actual }} à¸¿
            </p>
        </div>

    </div>

    <!-- Meal Plans History -->
    <div class="bg-white rounded-2xl shadow border border-gray-100">
        <div class="p-6 border-b">
            <h2 class="text-xl font-semibold text-gray-700">ðŸ“… Meal Plan History</h2>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-left">
                <thead class="bg-gray-50">
                    <tr class="text-gray-600 text-sm uppercase tracking-wide">
                        <th class="px-6 py-4">Date</th>
                        <th class="px-6 py-4">Calories</th>
                        <th class="px-6 py-4">Protein</th>
                        <th class="px-6 py-4">Total Cost</th>
                        <th class="px-6 py-4 text-center">Action</th>
                    </tr>
                </thead>

                <tbody class="divide-y">

                {% for plan in plans %}
                    <tr class="hover:bg-gray-50 transition">
                        <td class="px-6 py-4 text-gray-700">
                            {{ plan.created_at.strftime("%d %b %Y") }}
                        </td>

                        <td class="px-6 py-4 text-gray-700">
                            {{ plan.total_calories }} kcal
                        </td>

                        <td class="px-6 py-4 text-gray-700">
                            {{ plan.total_protein }} g
                        </td>

                        <td class="px-6 py-4 font-medium text-green-600">
                            {{ plan.total_cost }} à¸¿
                        </td>

                        <td class="px-6 py-4 text-center">
                            <a href="/grocery/{{ plan.id }}"
                               class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition">
                                View Grocery
                            </a>
                        </td>
                    </tr>
                {% endfor %}

                {% if not plans %}
                    <tr>
                        <td colspan="5" class="px-6 py-6 text-center text-gray-400">
                            No meal plans generated yet.
                        </td>
                    </tr>
                {% endif %}

                </tbody>
            </table>
        </div>
    </div>

</div>

</body>
</html>
